<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Shopping Tools</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=Prompt:wght@300;400;500;600&display=swap" rel="stylesheet">

    <style>
        :root {
            --glass-bg: rgba(255, 255, 255, 0.92);
            --glass-border: rgba(255, 255, 255, 0.8);
            --text-primary: #1e293b;
            --text-secondary: #64748b;
            --accent-color: #4f46e5;
            --accent-gradient: linear-gradient(135deg, #4f46e5 0%, #7c3aed 100%);
            --bg-gradient: linear-gradient(120deg, #e0c3fc 0%, #8ec5fc 100%);
            --success-color: #10b981;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; }

        body {
            font-family: 'Prompt', sans-serif;
            background: var(--bg-gradient);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 15px;
            color: var(--text-primary);
        }

        .main-card {
            background: var(--glass-bg);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border);
            border-radius: 32px;
            width: 100%;
            max-width: 420px;
            padding: 25px 20px;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.15);
            position: relative;
            overflow: hidden;
        }

        /* --- Header Status --- */
        .status-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        .app-title { font-weight: 600; font-size: 16px; color: var(--text-primary); }
        .live-badge {
            font-size: 10px; font-weight: 700; color: var(--success-color);
            background: rgba(16, 185, 129, 0.1); padding: 4px 8px; border-radius: 20px;
            display: flex; align-items: center; gap: 5px;
        }
        .dot { width: 6px; height: 6px; background: var(--success-color); border-radius: 50%; animation: blink 1.5s infinite; }
        @keyframes blink { 0%, 100% { opacity: 1; } 50% { opacity: 0.4; } }

        /* --- Tab Navigation --- */
        .nav-tabs {
            display: flex;
            background: #f1f5f9;
            border-radius: 16px;
            padding: 4px;
            margin-bottom: 20px;
        }
        .tab-btn {
            flex: 1;
            border: none;
            background: transparent;
            padding: 10px;
            border-radius: 12px;
            font-family: 'Prompt', sans-serif;
            font-weight: 600;
            color: var(--text-secondary);
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .tab-btn.active {
            background: #fff;
            color: var(--accent-color);
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }

        /* --- Content Sections --- */
        .tab-content { display: none; animation: fadeIn 0.3s ease; }
        .tab-content.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(5px); } to { opacity: 1; transform: translateY(0); } }

        /* --- Widget Styles (Clock/Weather) --- */
        .dashboard-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 20px; }
        .widget { background: #fff; border-radius: 18px; padding: 12px; box-shadow: 0 2px 8px rgba(0,0,0,0.03); }
        .widget-header { display: flex; justify-content: space-between; margin-bottom: 5px; }
        .temp-badge { font-size: 11px; font-weight: 700; color: #f59e0b; background: #fffbeb; padding: 2px 6px; border-radius: 6px; }
        .clock-time { font-family: 'Inter', sans-serif; font-size: 18px; font-weight: 700; color: var(--text-primary); font-variant-numeric: tabular-nums; }
        .clock-sec { font-size: 12px; color: #94a3b8; }
        .city-label { font-size: 10px; color: var(--text-secondary); text-transform: uppercase; letter-spacing: 0.5px; }

        /* --- Input Styles --- */
        .input-group { background: #fff; border-radius: 20px; padding: 15px; margin-bottom: 12px; border: 2px solid transparent; transition: 0.2s; }
        .input-group:focus-within { border-color: var(--accent-color); box-shadow: 0 4px 12px rgba(79, 70, 229, 0.15); }
        .label { font-size: 12px; color: var(--text-secondary); display: block; margin-bottom: 5px; }
        .input-row { display: flex; justify-content: space-between; align-items: center; }
        .symbol { font-weight: 700; color: var(--accent-color); background: #eef2ff; padding: 4px 8px; border-radius: 6px; font-size: 14px; }
        input { width: 70%; border: none; outline: none; text-align: right; font-family: 'Inter', sans-serif; font-size: 24px; font-weight: 700; background: transparent; color: var(--text-primary); }

        /* --- Discount Specific --- */
        .discount-options { display: flex; gap: 8px; margin-bottom: 15px; overflow-x: auto; padding-bottom: 5px; }
        .pill-btn {
            border: 1px solid #e2e8f0; background: #fff; padding: 6px 12px; border-radius: 20px;
            font-size: 12px; font-weight: 600; color: var(--text-secondary); cursor: pointer; white-space: nowrap;
        }
        .pill-btn:hover { border-color: var(--accent-color); color: var(--accent-color); }
        
        .result-box {
            background: linear-gradient(135deg, #1e293b 0%, #0f172a 100%);
            border-radius: 20px; padding: 20px; color: #fff; text-align: center; margin-top: 10px;
        }
        .result-label { font-size: 12px; opacity: 0.7; margin-bottom: 5px; }
        .result-price { font-family: 'Inter', sans-serif; font-size: 32px; font-weight: 700; margin-bottom: 10px; }
        .saved-badge { background: rgba(16, 185, 129, 0.2); color: #34d399; padding: 4px 12px; border-radius: 12px; font-size: 12px; font-weight: 600; display: inline-block; }

        /* Helper */
        .hidden { display: none; }
    </style>
</head>
<body>

    <div class="main-card">
        
        <div class="status-bar">
            <div class="app-title">Shopping Tools</div>
            <div class="live-badge"><span class="dot"></span> ONLINE</div>
        </div>

        <div class="dashboard-grid">
            <div class="widget">
                <div class="widget-header">
                    <span style="font-size:20px">üáπüá≠</span>
                    <span class="temp-badge" id="temp-th">..¬∞C</span>
                </div>
                <div class="city-label">Bangkok</div>
                <div class="clock-time" id="clock-th">00:00<span class="clock-sec">00</span></div>
            </div>
            <div class="widget">
                <div class="widget-header">
                    <span style="font-size:20px">üá≤üáæ</span>
                    <span class="temp-badge" id="temp-my">..¬∞C</span>
                </div>
                <div class="city-label">Kuala Lumpur</div>
                <div class="clock-time" id="clock-my">00:00<span class="clock-sec">00</span></div>
            </div>
        </div>

        <div class="nav-tabs">
            <button class="tab-btn active" onclick="switchTab('currency')">üí± ‡∏Ñ‡πà‡∏≤‡πÄ‡∏á‡∏¥‡∏ô</button>
            <button class="tab-btn" onclick="switchTab('discount')">üè∑Ô∏è ‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏î</button>
        </div>

        <div id="view-currency" class="tab-content active">
            <div class="input-group">
                <span class="label">Thai Baht</span>
                <div class="input-row">
                    <span class="symbol">THB</span>
                    <input type="number" id="thb" placeholder="0" inputmode="decimal">
                </div>
            </div>
            
            <div style="text-align:center; margin:-10px 0; position:relative; z-index:10;">
                <button onclick="clearCurrency()" style="width:35px; height:35px; border-radius:50%; border:none; background:var(--accent-color); color:#fff; box-shadow:0 4px 10px rgba(79, 70, 229, 0.3); cursor:pointer;">‚áÖ</button>
            </div>

            <div class="input-group">
                <span class="label">Malaysian Ringgit</span>
                <div class="input-row">
                    <span class="symbol">MYR</span>
                    <input type="number" id="myr" placeholder="0" inputmode="decimal">
                </div>
            </div>
            <div style="text-align:center; font-size:12px; color:#64748b; margin-top:10px;" id="rate-display">Loading Rate...</div>
        </div>

        <div id="view-discount" class="tab-content">
            <div class="input-group">
                <span class="label">‡∏£‡∏≤‡∏Ñ‡∏≤‡∏õ‡πâ‡∏≤‡∏¢ (Original Price)</span>
                <div class="input-row">
                    <span class="symbol">Price</span>
                    <input type="number" id="price-input" placeholder="0" inputmode="decimal">
                </div>
            </div>

            <div class="input-group">
                <span class="label">‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏î (Discount %)</span>
                <div class="input-row">
                    <span class="symbol">% OFF</span>
                    <input type="number" id="disc-input" placeholder="0" inputmode="decimal">
                </div>
            </div>

            <div class="discount-options">
                <button class="pill-btn" onclick="setDisc(10)">10%</button>
                <button class="pill-btn" onclick="setDisc(20)">20%</button>
                <button class="pill-btn" onclick="setDisc(30)">30%</button>
                <button class="pill-btn" onclick="setDisc(50)">50%</button>
                <button class="pill-btn" onclick="setDisc(70)">70%</button>
            </div>

            <div class="result-box">
                <div class="result-label">‡∏ï‡πâ‡∏≠‡∏á‡∏à‡πà‡∏≤‡∏¢‡∏à‡∏£‡∏¥‡∏á (Final Price)</div>
                <div class="result-price" id="final-price">0</div>
                <div class="saved-badge">‡∏õ‡∏£‡∏∞‡∏´‡∏¢‡∏±‡∏î‡πÑ‡∏õ <span id="saved-amount">0</span></div>
            </div>
        </div>

    </div>

    <script>
        // --- Tab Switching Logic ---
        function switchTab(tabName) {
            // Update Buttons
            document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');

            // Update Content
            document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
            document.getElementById(`view-${tabName}`).classList.add('active');
        }

        // --- System: Clock & Weather ---
        function updateSystem() {
            const now = new Date();
            const format = (tz) => {
                const parts = new Intl.DateTimeFormat('en-GB', { hour:'2-digit', minute:'2-digit', second:'2-digit', timeZone:tz }).formatToParts(now);
                return `${parts[0].value}:${parts[2].value}<span class="clock-sec">${parts[4].value}</span>`;
            };
            document.getElementById('clock-th').innerHTML = format('Asia/Bangkok');
            document.getElementById('clock-my').innerHTML = format('Asia/Kuala_Lumpur');
        }
        setInterval(updateSystem, 1000);

        async function fetchWeather() {
            try {
                const [bkk, kul] = await Promise.all([
                    fetch("https://api.open-meteo.com/v1/forecast?latitude=13.75&longitude=100.50&current_weather=true").then(r=>r.json()),
                    fetch("https://api.open-meteo.com/v1/forecast?latitude=3.14&longitude=101.69&current_weather=true").then(r=>r.json())
                ]);
                document.getElementById('temp-th').innerText = Math.round(bkk.current_weather.temperature) + "¬∞C";
                document.getElementById('temp-my').innerText = Math.round(kul.current_weather.temperature) + "¬∞C";
            } catch(e) {}
        }
        fetchWeather(); setInterval(fetchWeather, 600000);

        // --- Feature 1: Currency Converter ---
        let rate = 0;
        const thbEl = document.getElementById('thb');
        const myrEl = document.getElementById('myr');
        
        async function getRate() {
            try {
                const res = await fetch(`https://api.exchangerate-api.com/v4/latest/THB?t=${Date.now()}`);
                const data = await res.json();
                rate = data.rates.MYR;
                document.getElementById('rate-display').innerText = `1 THB ‚âà ${rate.toFixed(4)} MYR`;
                if(thbEl.value) thbEl.dispatchEvent(new Event('input'));
            } catch(e) { document.getElementById('rate-display').innerText = "Offline"; }
        }
        getRate(); setInterval(getRate, 60000);

        thbEl.addEventListener('input', () => {
            const v = parseFloat(thbEl.value);
            myrEl.value = isNaN(v) ? '' : (v * rate).toFixed(2);
        });
        myrEl.addEventListener('input', () => {
            const v = parseFloat(myrEl.value);
            thbEl.value = isNaN(v) ? '' : (v / rate).toFixed(2);
        });
        function clearCurrency() { thbEl.value=''; myrEl.value=''; thbEl.focus(); }


        // --- Feature 2: Discount Calculator ---
        const priceInput = document.getElementById('price-input');
        const discInput = document.getElementById('disc-input');
        const finalPriceEl = document.getElementById('final-price');
        const savedAmountEl = document.getElementById('saved-amount');

        function calcDiscount() {
            const price = parseFloat(priceInput.value) || 0;
            const disc = parseFloat(discInput.value) || 0;

            const saved = price * (disc / 100);
            const final = price - saved;

            // ‡∏à‡∏±‡∏î‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç‡πÉ‡∏´‡πâ‡∏™‡∏ß‡∏¢‡∏á‡∏≤‡∏° (‡∏°‡∏µ‡∏•‡∏π‡∏Å‡∏ô‡πâ‡∏≥‡∏Ñ‡∏±‡πà‡∏ô)
            finalPriceEl.innerText = final.toLocaleString('en-US', {minimumFractionDigits: 0, maximumFractionDigits: 2});
            savedAmountEl.innerText = saved.toLocaleString('en-US', {minimumFractionDigits: 0, maximumFractionDigits: 2});
        }

        function setDisc(val) {
            discInput.value = val;
            calcDiscount();
        }

        priceInput.addEventListener('input', calcDiscount);
        discInput.addEventListener('input', calcDiscount);

    </script>
</body>
</html>